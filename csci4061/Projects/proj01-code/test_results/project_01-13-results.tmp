==================================================================================================================================================================
== Test 13: Update Single file in Archive
== Creates an initial archive, then updates one of the files in that archive.
== Extracts files from the archive using 'tar', then checks that each extracted
== file has the correct contents.
Running test...
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 1
------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run File Setup
-- Copies files to be archived into current directory
Expected output is in file 'test_results/raw/project_01-13-1-expected.tmp'
Actual output is in file 'test_results/raw/project_01-13-1-actual.tmp'
Test PASSED
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 2
------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run Archive Creation
-- Create an initial archive using 'minitar'
Expected output is in file 'test_results/raw/project_01-13-2-expected.tmp'
Actual output is in file 'test_results/raw/project_01-13-2-actual.tmp'
Test PASSED
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 3
------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run File Modification
-- Change the file 'f11.bin' to a new version with the same contents as the
-- provided file 'f12.bin'.
Expected output is in file 'test_results/raw/project_01-13-3-expected.tmp'
Actual output is in file 'test_results/raw/project_01-13-3-actual.tmp'
Test PASSED
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 4
------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run Archive Update
-- Update the archive to contain the new version of 'f11.bin'
Expected output is in file 'test_results/raw/project_01-13-4-expected.tmp'
Actual output is in file 'test_results/raw/project_01-13-4-actual.tmp'
Test PASSED
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 5
------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run File Comparison
-- Extract files from the archive with 'tar' and verify that their contents are
-- correct
Expected output is in file 'test_results/raw/project_01-13-5-expected.tmp'
Actual output is in file 'test_results/raw/project_01-13-5-actual.tmp'
Test FAILED
== Side-by-Side Comparison ==
== Differing lines have a character like '|' '>' or '<' in the middle
==== EXPECT ====                                     ==== ACTUAL ====
$ tar -xvf test.tar                                  $ tar -xvf test.tar
hello.txt                                          <
f16.txt                                            <
f14.bin                                            <
f11.bin                                              f11.bin
f19.txt                                            | tar: Skipping to next header
f11.bin                                            | tar: Exiting with failure status due to previous errors
$ diff -q hello.txt test_cases/resources/hello.txt   $ diff -q hello.txt test_cases/resources/hello.txt
$ diff -q f16.txt test_cases/resources/f16.txt       $ diff -q f16.txt test_cases/resources/f16.txt
$ diff -q f14.bin test_cases/resources/f14.bin       $ diff -q f14.bin test_cases/resources/f14.bin
$ diff -q f19.txt test_cases/resources/f19.txt       $ diff -q f19.txt test_cases/resources/f19.txt
$ diff -q f11.bin test_cases/resources/f12.bin       $ diff -q f11.bin test_cases/resources/f12.bin
                                                   > Files f11.bin and test_cases/resources/f12.bin differ
$ rm -rf test_files/                                 $ rm -rf test_files/
$ mkdir test_files                                   $ mkdir test_files
$ mv hello.txt test_files/                           $ mv hello.txt test_files/
$ mv f16.txt test_files/                             $ mv f16.txt test_files/
$ mv f14.bin test_files/                             $ mv f14.bin test_files/
$ mv f11.bin test_files/                             $ mv f11.bin test_files/
$ mv f19.txt test_files/                             $ mv f19.txt test_files/
$ exit                                               $ exit
exit                                                 exit
== Line Differences ==
EXPECT  2) hello.txt
EXPECT  3) f16.txt
EXPECT  4) f14.bin
EXPECT  6) f19.txt
ACTUAL  3) tar: Skipping to next header
EXPECT  7) f11.bin
ACTUAL  4) tar: Exiting with failure status due to previous errors
ACTUAL 10) Files f11.bin and test_cases/resources/f12.bin differ
